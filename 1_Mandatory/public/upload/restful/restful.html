<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>RESTful</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="/upload/upload.css">
    <link rel="stylesheet" href="/upload/restful/restful.css">
</head>
<body>
<!-- navigation bar -->
<nav class="navbar navbar-default navbar-fixed-top">
    <div class="container-fluid">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">HOME</a>
        </div>
        <div class="collapse navbar-collapse" id="myNavbar">
            <ul class="nav navbar-nav navbar-right">
                <li><a href="/npm">NPM</a></li>
                <li><a href="/jquery">JQUERY</a></li>
                <li><a href="/javascript">JAVASCRIPT</a></li>
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">MORE
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><a href="/ajax">AJAX</a></li>
                        <li><a href="/restful">RESTFUL</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="mappingHeader">
    <h1>The RESTful API</h1>
    <h4>REST is acronym for <strong>RE</strong>presentational <strong>S</strong>tate
        <string>T</string>
        ransfer.
    </h4>
    <h4>REST has it's own 6 guiding constraints, which must be satisfied <br>if an interface needs to be referred as
        <string>RESTful.</string>
    </h4>
</div>
<div class="restRow">
    <div class="restColumn"><h4><strong>1. Client-server</strong></h4>
        <p>By separating the user interface concerns from the data storage concerns, we improve the portability of the
            user interface across multiple platforms and improve scalability by simplifying the server components.</p>
    </div>
    <div class="restColumn"><h4><strong>2 Stateless</strong></h4>
        <p>Each request from client to server must contain all of the information necessary to understand the request,
            and cannot take advantage of any stored context on the server. Session state is therefore kept entirely on
            the client.</p></div>
    <div class="restColumn"><h4><strong>3. Cacheable</strong></h4>
        <p>Cache constraints require that the data within a response to a request be implicitly or explicitly labeled as
            cacheable or non-cacheable. If a response is cacheable, then a client cache is given the right to reuse that
            response data for later, equivalent requests.</p></div>
    <div class="restColumn"><h4><strong>4. Uniform interface</strong></h4>
        <p>By applying the software engineering principle of generality to the component interface, the overall system
            architecture is simplified and the visibility of interactions is improved. In order to obtain a uniform
            interface, multiple architectural constraints
            are needed to guide the behavior of components. REST is defined by four interface constraints:
            identification of resources; manipulation of resources through representations; self-descriptive messages;
            and, hypermedia as the engine of application state.</p></div>
    <div class="restColumn"><h4><strong>5. Layered system</strong></h4>
        <p>The layered system style allows an architecture to be composed of hierarchical layers by constraining
            component behavior such that each component cannot “see” beyond the immediate layer with which they are
            interacting.</p></div>
    <div class="restColumn"><h4><strong>6. Code on demand</strong></h4>
        <p>REST allows client functionality to be extended by downloading and executing code in the form of applets or
            scripts. This simplifies clients by reducing the number of features required to be pre-implemented.</p>
    </div>
</div>

<div class="mappingHeader" style="text-align: center">
    <h2>The methods of REST</h2>
    <div class="bodyStripe"></div>
    <div class="restRow">
        <div class="restColumn2"><h4>GET</h4>
            <p>Retrieve a representation of a resource.</p></div>
        <div class="restColumn2"><h4>POST</h4>
            <p>Create a new resource to an existing URL.</p></div>
        <div class="restColumn2"><h4>PUT</h4>
            <p>Create a new resource to a new URL, or modify an existing resource to an existing URL.</p>
        </div>
        <div class="restColumn2"><h4>PATCH</h4>
            <p>More or less the same as the PUT method</p></div>
        <div class="restColumn2"><h4>DELETE</h4>
            <p>Delete an existing resource.</p></div>
    </div>
    <div class="bodyStripe"></div>
    <p>
    <h2>The following wil show examples on the methods of REST</h2></p>
    <p><h4><em>Communication between clients and servers on the internet mostly takes place via the HTTP
    protocol (Hypertext Transfer Protocol). This enables a data exchange <br>
    via request and response. When a user retrieves a URL via a client (e.g. their web browser),
    this client sends a request to the server, and the <br>
    server provides an HTML page that is loaded by the user’s browser. The two most commonly used methods to enable this
    kind of communication are GET and POST.</em></h4></p> <br>
    <p>
    <h3>
        <li>Query strings</li>
    </h3>
    </p>
    <p><h4><em>When the GET request method is used, if a client uses the HTTP protocol on a web server to request a
    certain
    resource, the client sends the server certain GET parameters through the <br>
    requested URL. These parameters are pairs of key and their corresponding values, so-called key-value pairs. These
    are added to the
    <br>URL with a “?” sign and tell the server which resources are meant. The name and value are always separated using
    a “=” sign.</em></h4></p>
    <br>
    <p><h4><em>Here is a look at the syntax in the url:</em></h4></p> <br>
    <img src="/upload/restful/assets/get_parameters1.png" alt="Get Parameters" style="position: center">
    <br><br>
    <p><h4><em>And if more parameters are to be used, the syntax would look like this;</em></h4></p>
    <br>
    <img src="/upload/restful/assets/Get_parameters2.png" alt="Get parameters 2">
    <br>
    <p><h4><em>This is possible through the following get request method:</em></h4></p>
    <img src="/upload/restful/assets/Query_string_get.png" alt="Get code">
    <p><h4><em>The above code can be run and tested right now. Go on, try to type "localhost/rest?q=hello" in your url.
    It will take
    <br>you to a blank page with a little text, and your value.</em></h4></p>
</div>

<div class="restRow" style="margin-top: 7%">
    <div class="methodShow">
        <p>Let' try going through a familiar case in this example, to show how the methods of Rest works. I Will be
            using an old
            <br> code, which i am familiar with, for the sake of understanding.
            First off, lets say we want a "database" of cars.
            In this example we dont use a real database but instead an array of JSON objects, just for the
            demonstration.
            The Array wil consist of 3 cars from the start, shown in the right side:
        </p>
        <br><br><br>
        <p>Taking into consideration that the array of cars which we have created is in the form of JSON data. We have
            to add something
            <br>in the top of our code, to be able to parse JSON date. We do that through express, by notating
            "app.use(express.json());" and
            <br> "app.use(express.urlencoded());" in the top of our app.js file. <br>
            - If a problem parsing json data still occurs, it could be because of NPM's pre installed bodyparser. <br>
            this can be removed in the terminal by writing "npm uninstall body-parser".
            <br></p>
        <br><br><br>
        <p>We are gonna demonstrate 4 of the 5 methods, while PUT and PATCH could be perceived as somewhat of the same
            method.</p>
        <br>
        <p>
        <h4>
            <li>GET mapping</li>
        </h4>
        <p>First off we wil look at the get method, and this will be done in two different ways: <br>
        <li style="margin-left: 2%">Get all cars</li>
        <li style="margin-left: 2%">Get a car with a specific id</li>
        <br>The first app.get returns the entire array of cars to the user through the callback function,
        this happens when arriving at the page "/cars". <br>
        <!-- - The callback function is explained under the JavaScript page.<br><br> -->
        The second get request is a get request for a car with a specific id. As seen above the cars have an id and a
        model.
        <br> The path which is written as: "cars/:id" is a method to receive a request parameter where it in this case,
        looks for a specific id.
        </p><br><br><br><br>
        <p>
        <h4>
            <li>POST mapping</li>
        </h4>
        </p>
        <p>The Post mapping seen on the right hand side, continue our car case. <br>
            At first we are going to "console.log(req.body);" so that we can see in our terminal, what is going in. <br>
            then we use the parameters in the req.body to make a new object called "newCar", and as we have seen above,
            all the cars have an id.
            Since this is just an array and not at database, the id is not auto incremented, this is something we have
            do ensure ourself. We do that by making a variable
            called "nextCarId" and notate it to be 3, while we already have the first 3 id's in our array.
            then we set the "newCar.id = nextCarId++;", which ensures that the next id of the car is going to be
            incremented every time a new car is created.
            <br>- cars.push(newCar) is a method to push the new object into the array of cars. <br>
            The last return statement "res.send({data : cars}); is telling us that it is a json object called data which
            stores a array of objects, thus the jason object created here is:</p>
        <br>
        <div class="jsonExample">
            <p>{ </p>
            <p class="space1"> "data" : [ </p>
            <p class="space2">{</p>
            <p class="space3">"id": 1,</p>
            <p class="space3">"model": "Jaguar"</p>
            <p class="space2">}, </p>
            <p class="space2">{</p>
            <p class="space3">"id": 2,</p>
            <p class="space3">"Model": "Mitsubishi"</p>
            <p class="space2">}</p>
            <p class="space1">]</p>
            }<br>
        </div>
        <p style="margin-top: 50%">
        <h4>
            <li>PUT / PATCH mapping</li>
        </h4>
        <p>The PUT/PATCH mapping is used when the user wishes to edit a already existing object, without deleting it and
            creating a new one.</p>
        In this example, we are sending the specific id along in our path just like we did in one of our get mappings.
        Then we make an if statement looking for the
        parameter called if, to check if it exists in our array. if it exists, it returns a spread operator in the
        object.
        <br></p>
        <p><strong style="text-decoration: underline"><em>- Spread operator</em></strong><strong><em> allows an iterable
            such as an array expression or string to be expanded in places where zero or more arguments
            (for function calls) or elements (for array literals) are expected, or an object expression to be expanded
            in places where zero or more
            key-value pairs (for object literals) are expected.</em></strong>
            <br><br><br><br><br><br>
            <!-- https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax -->
        <p>
        <h4>
            <li>DELETE mapping</li>
        </h4>
        <br>
        <p>The DELETE mapping does as the name suggests, delete an item in the array. <br>
            Yet again we put the id parameter in the path to make sure that we get the right object.
    </div>
    <div class="methodShow">
        <img src="/upload/restful/assets/Car%20array.png" alt="car array" style="margin-left: 20%"> <br>
        <img src="/upload/restful/assets/express_json.png" alt="Express & json"
             style="margin-left: 20%; margin-top: 5%">
        <img src="/upload/restful/assets/Get methods.png" alt="GET Method" style="margin-left: 20%; margin-top: 12%">
        <img src="/upload/restful/assets/post_method.png" alt="POST method" style="margin-left: 20%; margin-top: 27%">
        <img src="/upload/restful/assets/patch_method.png" alt="patch method" style="margin-left: 20%; margin-top: 57%">
        <img src="/upload/restful/assets/delete_mapping.png" alt="Delete method"
             style="margin-left: 20%; margin-top: 15%; padding-bottom: 10%">
    </div>
</div>


<div class="restRow" style="margin-top: 100%">
    <div class="jsonExample" id="car_Array">
        <table id="car_Table">
            <tr>
                <td id="cars">

                </td>
            </tr>
        </table>
    </div>
    <button id="reload">Load</button>
    <button id="delete_All">Delete All</button>
</div>

<script src="/upload/upload.js"></script>
<script src="/upload/restful/restful.js"></script>
</body>

</html>